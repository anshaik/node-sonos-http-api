'use strict';
var request = require('request-promise');

var apiBaseEndpoint = 'https://services.rdio.com/api/1/';
/*
function parseUri(uri) {
  // x-sonos-http:_t%3a%3a36909122.mp3?sid=11&flags=8224&sn=11

  /x-.+?:.+%3a(\d+)\./.test(uri);

  var id = 't' + RegExp.$1;

  return {
    id
  };

}

function tryGetHighResArt(uri) {
  var trackInfo = parseUri(uri);

  var parameters = {
    method: 'get',
    keys: trackInfo.id
  };

  return request({
    method: 'POST',
    url: apiBaseEndpoint,
    body: parameters,
    json: true
  })
    .then((response) => {
      return response.album.cover_big; // jscs:ignore requireCamelCaseOrUpperCaseIdentifiers
    });
}

module.exports = function (services) {
  services[11] = {
    tryGetHighResArt
  };
}a;*/
